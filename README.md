# Data-Query-Assistant

## Overview

This project provides a robust solution for generating SQL queries from natural language questions using ChromaDB, MongoDB, and PostgreSQL. It is designed to be integrable into any website and adaptable to various database structures. The system includes tools for embedding storage, query generation, and result retrieval.

## Architecture
![image](https://github.com/user-attachments/assets/78a81b25-62ee-4791-9117-093f6a5b7ed4)

### Components

1. **ChromaDB**
   - **Purpose**: Stores and manages embeddings of database schema and relationships. ChromaDB is used to index and search the embeddings generated from the database schema and relationship data.
   - **Functionality**: 
     - Stores embeddings in collections.
     - Supports querying for relevant schema and relationship information based on user input.

2. **MongoDB**
   - **Purpose**: Stores historical interactions, including user queries and generated SQL queries. MongoDB is used to keep track of user interactions with the system for audit and analysis purposes.
   - **Functionality**: 
     - Saves user queries and AI-generated responses.
     - Provides a historical record of interactions for further analysis or debugging.

3. **PostgreSQL**
   - **Purpose**: Serves as the relational database where the actual data is stored. The system interacts with PostgreSQL to fetch data, execute queries, and validate query results.
   - **Functionality**: 
     - Provides schema and relationship details for ChromaDB.
     - Executes SQL queries generated by the system.

### Workflow

1. **Data Embeddings Generation**
   - **Schema Embeddings**: Extracts schema information from PostgreSQL and stores it in ChromaDB as embeddings.
   - **Relationship Embeddings**: Extracts relationship information (foreign keys) from PostgreSQL and stores it in ChromaDB.

2. **Query Processing**
   - **User Input**: Receives natural language queries from users.
   - **Embedding Query**: Uses ChromaDB to retrieve relevant schema and relationship information based on the userâ€™s query.
   - **Context Preparation**: Prepares a context for AI query generation, incorporating schema and relationship information.
   - **SQL Query Generation**: Uses AI (Gemini) to generate an SQL query based on the prepared context.

3. **Query Execution**
   - **SQL Execution**: Executes the generated SQL query against the PostgreSQL database.
   - **Results Retrieval**: Retrieves and returns the results to the user.

4. **History Logging**
   - **Interaction Logging**: Saves user queries and AI responses to MongoDB for historical tracking and analysis.

### Integration

- **Website Integration**: The project is designed to be integrated into any website. The system provides endpoints for adding data sources and processing user queries.
- **Database Adaptability**: The architecture is adaptable to different database structures by configuring the schema and relationship extraction queries to match the target database.

### Testing

- **Sample Test Database**: A sample test database was used to validate the functionality and performance of the system. This database was used to ensure that the system can handle real-world queries and return accurate results.

## Getting Started

1. **Set Up Environment**: Configure ChromaDB, MongoDB, and PostgreSQL as per your requirements.
2. **Integrate with Website**: Use the provided endpoints to integrate the system with your website.
3. **Test and Validate**: Run tests using a sample database to ensure everything is functioning correctly.

## Conclusion

This project provides a flexible and powerful solution for generating SQL queries from natural language inputs. With its modular architecture and support
